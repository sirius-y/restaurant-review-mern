{"ast":null,"code":"import _slicedToArray from\"D:/Projects (Learning)/mern project 1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import RestaurantDataService from\"../services/restaurant\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddReview=function AddReview(props){var initialReviewState=\"\";var editing=false;if(props.location.state&&props.location.state.currentReview){editing=true;initialReviewState=props.location.state.currentReview.text;}var _useState=useState(initialReviewState),_useState2=_slicedToArray(_useState,2),review=_useState2[0],setReview=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submitted=_useState4[0],setSubmitted=_useState4[1];var handleInputChange=function handleInputChange(event){setReview(event.target.value);};var saveReview=function saveReview(){var data={text:review,name:props.user.name,user_id:props.user.id,restaurant_id:props.match.params.id};if(editing){data.review_id=props.location.state.currentReview._id;RestaurantDataService.updateReview(data).then(function(response){setSubmitted(true);console.log(response.data);}).catch(function(e){console.log(e);});}else{RestaurantDataService.createReview(data).then(function(response){setSubmitted(true);console.log(response.data);}).catch(function(e){console.log(e);});}};return/*#__PURE__*/_jsx(\"div\",{children:props.user?/*#__PURE__*/_jsx(\"div\",{className:\"submit-form\",children:submitted?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"You submitted successfully!\"}),/*#__PURE__*/_jsx(Link,{to:\"/restaurants/\"+props.match.params.id,className:\"btn btn-success\",children:\"Back to Restaurant\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"description\",children:[editing?\"Edit\":\"Create\",\" Review\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"text\",required:true,value:review,onChange:handleInputChange,name:\"text\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:saveReview,className:\"btn btn-success\",children:\"Submit\"})]})}):/*#__PURE__*/_jsx(\"div\",{children:\"Please log in.\"})});};export default AddReview;","map":{"version":3,"sources":["D:/Projects (Learning)/mern project 1/frontend/src/components/add-review.js"],"names":["React","useState","RestaurantDataService","Link","AddReview","props","initialReviewState","editing","location","state","currentReview","text","review","setReview","submitted","setSubmitted","handleInputChange","event","target","value","saveReview","data","name","user","user_id","id","restaurant_id","match","params","review_id","_id","updateReview","then","response","console","log","catch","e","createReview"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport RestaurantDataService from \"../services/restaurant\";\nimport { Link } from \"react-router-dom\";\n\nconst AddReview = props => {\n  let initialReviewState = \"\"\n\n  let editing = false;\n\n  if (props.location.state && props.location.state.currentReview) {\n    editing = true;\n    initialReviewState = props.location.state.currentReview.text\n  }\n\n  const [review, setReview] = useState(initialReviewState);\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleInputChange = event => {\n    setReview(event.target.value);\n  };\n\n  const saveReview = () => {\n    var data = {\n      text: review,\n      name: props.user.name,\n      user_id: props.user.id,\n      restaurant_id: props.match.params.id\n    };\n\n    if (editing) {\n      data.review_id = props.location.state.currentReview._id\n      RestaurantDataService.updateReview(data)\n        .then(response => {\n          setSubmitted(true);\n          console.log(response.data);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    } else {\n      RestaurantDataService.createReview(data)\n        .then(response => {\n          setSubmitted(true);\n          console.log(response.data);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n\n  };\n\n  return (\n    <div>\n      {props.user ? (\n      <div className=\"submit-form\">\n        {submitted ? (\n          <div>\n            <h4>You submitted successfully!</h4>\n            <Link to={\"/restaurants/\" + props.match.params.id} className=\"btn btn-success\">\n              Back to Restaurant\n            </Link>\n          </div>\n        ) : (\n          <div>\n            <div className=\"form-group\">\n              <label htmlFor=\"description\">{ editing ? \"Edit\" : \"Create\" } Review</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"text\"\n                required\n                value={review}\n                onChange={handleInputChange}\n                name=\"text\"\n              />\n            </div>\n            <button onClick={saveReview} className=\"btn btn-success\">\n              Submit\n            </button>\n          </div>\n        )}\n      </div>\n\n      ) : (\n      <div>\n        Please log in.\n      </div>\n      )}\n\n    </div>\n  );\n};\n\nexport default AddReview;"]},"metadata":{},"sourceType":"module"}