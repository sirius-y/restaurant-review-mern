{"ast":null,"code":"import _objectSpread from\"D:/Projects (Learning)/mern project 1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Projects (Learning)/mern project 1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import RestaurantDataService from\"../services/restaurant\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Restaurant=function Restaurant(props){var initialRestaurantState={id:null,name:\"\",address:{},cuisine:\"\",reviews:[]};var _useState=useState(initialRestaurantState),_useState2=_slicedToArray(_useState,2),restaurant=_useState2[0],setRestaurant=_useState2[1];var getRestaurant=function getRestaurant(id){RestaurantDataService.get(id).then(function(response){setRestaurant(response.data);console.log(response.data);}).catch(function(e){console.log(e);});};useEffect(function(){getRestaurant(props.match.params.id);},[props.match.params.id]);var deleteReview=function deleteReview(reviewId,index){RestaurantDataService.deleteReview(reviewId,props.user.id).then(function(response){setRestaurant(function(prevState){prevState.reviews.splice(index,1);return _objectSpread({},prevState);});}).catch(function(e){console.log(e);});};return/*#__PURE__*/_jsx(\"div\",{children:restaurant?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:restaurant.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cuisine: \"}),restaurant.cuisine,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),restaurant.address.building,\" \",restaurant.address.street,\", \",restaurant.address.zipcode]}),/*#__PURE__*/_jsx(Link,{to:\"/restaurants/\"+props.match.params.id+\"/review\",className:\"btn btn-primary\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"h4\",{children:\" Reviews \"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:restaurant.reviews.length>0?restaurant.reviews.map(function(review,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 pb-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[review.text,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"User: \"}),review.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Date: \"}),review.date]}),props.user&&props.user.id===review.user_id&&/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return deleteReview(review._id,index);},className:\"btn btn-primary col-lg-5 mx-1 mb-1\",children:\"Delete\"}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/restaurants/\"+props.match.params.id+\"/review\",state:{currentReview:review}},className:\"btn btn-primary col-lg-5 mx-1 mb-1\",children:\"Edit\"})]})]})})},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet.\"})})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"No restaurant selected.\"})]})});};export default Restaurant;","map":{"version":3,"sources":["D:/Projects (Learning)/mern project 1/frontend/src/components/restaurants.js"],"names":["React","useState","useEffect","RestaurantDataService","Link","Restaurant","props","initialRestaurantState","id","name","address","cuisine","reviews","restaurant","setRestaurant","getRestaurant","get","then","response","data","console","log","catch","e","match","params","deleteReview","reviewId","index","user","prevState","splice","building","street","zipcode","length","map","review","text","date","user_id","_id","pathname","state","currentReview"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport RestaurantDataService from \"../services/restaurant\";\nimport { Link } from \"react-router-dom\";\n\nconst Restaurant = props => {\n  const initialRestaurantState = {\n    id: null,\n    name: \"\",\n    address: {},\n    cuisine: \"\",\n    reviews: []\n  };\n  const [restaurant, setRestaurant] = useState(initialRestaurantState);\n\n  const getRestaurant = id => {\n    RestaurantDataService.get(id)\n      .then(response => {\n        setRestaurant(response.data);\n        console.log(response.data);\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  };\n\n  useEffect(() => {\n    getRestaurant(props.match.params.id);\n  }, [props.match.params.id]);\n\n  const deleteReview = (reviewId, index) => {\n    RestaurantDataService.deleteReview(reviewId, props.user.id)\n      .then(response => {\n        setRestaurant((prevState) => {\n          prevState.reviews.splice(index, 1)\n          return({\n            ...prevState\n          })\n        })\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  };\n\n  return (\n    <div>\n      {restaurant ? (\n        <div>\n          <h5>{restaurant.name}</h5>\n          <p>\n            <strong>Cuisine: </strong>{restaurant.cuisine}<br/>\n            <strong>Address: </strong>{restaurant.address.building} {restaurant.address.street}, {restaurant.address.zipcode}\n          </p>\n          <Link to={\"/restaurants/\" + props.match.params.id + \"/review\"} className=\"btn btn-primary\">\n            Add Review\n          </Link>\n          <h4> Reviews </h4>\n          <div className=\"row\">\n            {restaurant.reviews.length > 0 ? (\n             restaurant.reviews.map((review, index) => {\n               return (\n                 <div className=\"col-lg-4 pb-1\" key={index}>\n                   <div className=\"card\">\n                     <div className=\"card-body\">\n                       <p className=\"card-text\">\n                         {review.text}<br/>\n                         <strong>User: </strong>{review.name}<br/>\n                         <strong>Date: </strong>{review.date}\n                       </p>\n                       {props.user && props.user.id === review.user_id &&\n                          <div className=\"row\">\n                            <a onClick={() => deleteReview(review._id, index)} className=\"btn btn-primary col-lg-5 mx-1 mb-1\">Delete</a>\n                            <Link to={{\n                              pathname: \"/restaurants/\" + props.match.params.id + \"/review\",\n                              state: {\n                                currentReview: review\n                              }\n                            }} className=\"btn btn-primary col-lg-5 mx-1 mb-1\">Edit</Link>\n                          </div>                   \n                       }\n                     </div>\n                   </div>\n                 </div>\n               );\n             })\n            ) : (\n            <div className=\"col-sm-4\">\n              <p>No reviews yet.</p>\n            </div>\n            )}\n\n          </div>\n\n        </div>\n      ) : (\n        <div>\n          <br />\n          <p>No restaurant selected.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Restaurant;"]},"metadata":{},"sourceType":"module"}